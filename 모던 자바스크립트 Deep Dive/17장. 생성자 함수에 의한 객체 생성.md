# 17ì¥: ìƒì„±ì í•¨ìˆ˜ì— ì˜í•œ ê°ì²´ ìƒˆì„± 

## 17-1. Object ìƒì„±ì í•¨ìˆ˜
- ìƒì„±ì í•¨ìˆ˜(Constructor)ë€ `new` ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œí•˜ì—¬ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤)ë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ë¥¼ ëœ»í•œë‹¤ 
- Object ì™¸ì—ë„ String, Number, Boolean, Function, Array, Date, RegExp, Promise ë“±ì˜ ë¹ŒíŠ¸ì¸ ìƒì„±ì í•¨ìˆ˜ ì¡´ì¬í•œë‹¤ 
```javascript 
const user = new Object();

user.name = 'James Sohn';
user.welcome = function() {
    return `Welcome back ${this.name}!`;
};

console.log(user); // --> { name: 'James Sohn', welcome: [Function (anonymous)] }
console.log(user.welcome()); // --> Welcome back James Sohn!
```

<br>

## 17-2. ìƒì„±ì í•¨ìˆ˜ 
- ê°ì²´ ë¦¬í„°ëŸ´ì— ì˜í•œ ê°ì²´ ìƒì„± ë°©ì‹ì´ ìƒì„±ì í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ì§ê´€ì ì´ê³  ê°„í¸í•˜ì§€ë§Œ, ë™ì¼í•œ í”„ë¡œí¼í‹°ë¥¼ ê°–ëŠ” ì—¬ëŸ¬ ê°œì˜ ê°ì²´ë¥¼ ìƒì„±í•´ì•¼ í•˜ëŠ” ê²½ìš° ë§¤ë²ˆ ê°™ì€ í”„ë¡œí¼í‹°ë¥¼ ê¸°ìˆ í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë¹„íš¨ìœ¨ì ì´ë‹¤ 
- **ì°¸ê³ **: ê°œì²´ë§ˆë‹¤ í”„ë¡œí¼í‹° ê°’ì´ ë‹¤ë¥¼ ìˆ˜ëŠ” ìˆì§€ë§Œ, ë©”ì„œë“œëŠ” ë‚´ìš©ì´ ë™ì¼í•œ ê²½ìš°ê°€ ë§ë‹¤ 
```javascript 
// ê°ì²´ ë¦¬í„°ëŸ´ì„ ì‚¬ìš©í•´ì„œ ë™ì¼ ë©”ì„œë“œë¥¼ ë³´ìœ í•œ ë‹¤ìˆ˜ì˜ ê°ì²´ ìƒì„±í•˜ê¸° 
const circle1 = {
    radius: 5,
    getDiameter() {
        return 2 * this.radius;
    }
};

const circle2 = {
    radius: 10, 
    getDiameter() {
        return 2 * this.radius;
    }
};
```

- ë°˜ë©´ ìƒì„±ì í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œ ê°ì²´ ìƒì„±ì€ ë§ˆì¹˜ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤)ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ í…œí”Œë¦¿(í´ë˜ìŠ¤)ì²˜ëŸ¼ ìƒì„±ì í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ í”„ë¡œí¼í‹° êµ¬ì¡°ê°€ ë™ì¼í•œ ê°ì²´ ì—¬ëŸ¬ ê°œë¥¼ ê°„í¸í•˜ê²Œ ìƒì„±í•  ìˆ˜ ìˆë‹¤ 
```javascript 
function Circle(radius) {
    this.radius = radius; 
    this.getDiameter = function() {
        return 2 * this.radius;
    };
}

const circle1 = new Circle(5);
const circle2 = new Circle(10);

console.log(circle1.getDiameter()); // --> 10
console.log(circle2.getDiameter()); // --> 20
```
- â—ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì˜ `this`ëŠ” ìƒì„±ì í•¨ìˆ˜ê°€ ìƒì„±í•  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤â—
- ë§Œì•½ `new` ì—°ì‚°ìì™€ í•¨ê»˜ ìƒì„±ì í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ ìƒì„±ì í•¨ìˆ˜ê°€ ì•„ë‹Œ ì¼ë°˜ í•¨ìˆ˜ë¡œ ë™ì‘í•œë‹¤ 
```javascript
function Circle(radius) {
    this.radius = radius; 
    this.getDiameter = function() {
        return 2 * this.radius;
    };
}
// new ì—°ì‚°ì ì—†ëŠ” Circleì€ ìƒì„±ì í•¨ìˆ˜ê°€ ì•„ë‹Œ ì¼ë°˜ í•¨ìˆ˜ë¡œ ë™ì‘í•¨ 
const circle3 = Circle(15);

// Circleì€ ë°˜í™˜ê°’ì´ ì—†ìœ¼ë¯€ë¡œ undefined ë°˜í™˜ 
console.log(circle3); // --> undefined 

// ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œëœ Circle ë‚´ì˜ thisëŠ” ì „ì—­ ê°ì²´ë¥¼ ê°€ë¦¬í‚´ 
console.log(circle3.radius); // --> TypeError
console.log(radius); // --> 15
```

### ğŸ’¡ `new` ìƒì„±ì í•¨ìˆ˜ í˜¸ì¶œ ë•Œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì˜ ë™ì‘ ì›ë¦¬: 
**1. ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ê³¼ this ë°”ì¸ë”©**
- í•¨ìˆ˜ ëª¸ì²´ì˜ ì½”ë“œê°€ í•œ ì¤„ì”© ì‹¤í–‰ë˜ëŠ” ëŸ°íƒ€ì„ ì´ì „ì— ì‹¤í–‰ëœë‹¤ ë¹ˆ ê°ì²´(ì¸ìŠ¤í„´ìŠ¤)ê°€ ìƒì„±ë˜ê³  thisì— ë°”ì¸ë”©ëœë‹¤
- **this ë°”ì¸ë”©**: thisê°€ ê°€ë¦¬í‚¬ ê°ì²´ë¥¼ ë°”ì¸ë”©í•˜ëŠ” ê²ƒ

**2. ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™”**
- ìƒì„±ì í•¨ìˆ˜ì˜ ì½”ë“œê°€ ì‹¤í–‰ë˜ë©° thisì— ë°”ì¸ë”©ë˜ì–´ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ˆê¸°í™”í•œë‹¤ (í”„ë¡œí¼í‹°/ë©”ì„œë“œ ì¶”ê°€)

**3. ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜**
- ìƒì„±ì í•¨ìˆ˜ ë‚´ë¶€ì˜ ëª¨ë“  ì²˜ë¦¬ê°€ ëë‚˜ë©´ ì™„ì„±ëœ ì¸ìŠ¤í„´ìŠ¤ê°€ ë°”ì¸ë”©ëœ thisê°€ **ì•”ë¬µì ìœ¼ë¡œ** ë°˜í™˜ëœë‹¤
- ë§Œì•½ thisê°€ ì•„ë‹Œ ë‹¤ë¥¸ ê°ì²´ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ë°˜í™˜í•˜ë©´ this ëŒ€ì‹  returnë¬¸ì— ëª…ì‹œí•œ ê°ì²´ê°€ ë°˜í™˜ëœë‹¤. ì›ì‹œ ê°’ì´ ë°˜í™˜ë˜ë©´ ì›ì‹œ ê°’ ë°˜í™˜ì€ ë¬´ì‹œë˜ê³  ì•”ë¬µì ìœ¼ë¡œ thisê°€ ë°˜í™˜ëœë‹¤ (ìƒì„±ì í•¨ìˆ˜ì—ì„œ returnë¬¸ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ìƒì„±ì í•¨ìˆ˜ì˜ ê¸°ë³¸ ë™ì‘ì„ í›¼ì†í•˜ë¯€ë¡œ ì§€ì–‘í•´ì•¼ í•œë‹¤)

```javascript 
function Circle(radius) {
    // â‘  ì•”ë¬µì ìœ¼ë¡œ ë¹ˆ ê°ì²´ ìƒì„±, thisì— ë°”ì¸ë”©ë¨ 

    // â‘¡ thisì— ë°”ì¸ë”©ë˜ì–´ ìˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì´ˆê¸°í™” 
    this.radius = radius; 
    this.getDiameter = function() {
        return 2 * this.radius;
    };
    // â‘¢ ì™„ì„±ëœ ì¸ìŠ¤í„´ìŠ¤ê°€ ë°”ì¸ë”©ëœ thisê°€ ì•”ë¬µì ìœ¼ë¡œ ë°˜í™˜ë˜ê±°ë‚˜
    // or ëª…ì‹œì ìœ¼ë¡œ ë°˜í™˜ë˜ëŠ” ê°ì²´ê°€ ë°˜í™˜ë¨  (eg. return {};) --> {}
}

const circle = new Circle(1);
console.log(circle); // --> Circle {radius: 1, getDiameter: f}
```

### ğŸ’¡ë‚´ë¶€ ë©”ì„œë“œ `[[Call]]`, `[[Construct]]`:
- í•¨ìˆ˜ ì„ ì–¸ë¬¸/í‘œí˜„ì‹ìœ¼ë¡œ ì •ì˜í•œ í•¨ìˆ˜ëŠ” ì¼ë°˜ì ì¸ í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ê²ƒì€ ë¬¼ë¡  ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤ (--> new ì—°ì‚°ìì™€ í•¨ê»˜ í˜¸ì¶œí•´ì„œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤)
- í•¨ìˆ˜ëŠ” ê°ì²´(~~ê·¸ ì´ìƒ~~)ì´ë¯€ë¡œ í•¨ìˆ˜ ê°ì²´ë§Œì„ ìœ„í•œ `[[Environment]]`, `[[FormalParameters]]` ë“±ì˜ ë‚´ë¶€ ìŠ¬ë¡¯ê³¼ `[[Call]]`, `[[Construct]]` ê°™ì€ ë‚´ë¶€ ë©”ì„œë“œë¥¼ ì¶”ê°€ë¡œ ê°€ì§€ê³  ìˆë‹¤ 
- ì¼ë°˜ í•¨ìˆ˜ë¡œ í˜¸ì¶œë˜ë©´ `[[Call]]`, new ì—°ì‚°ìì™€ í•¨ê»˜ ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œë˜ë©´ ë‚´ë¶€ ë©”ì„œë“œ `[[Construct]]`ê°€ í˜¸ì¶œëœë‹¤ 
- `[[Call]]`: Callable --> í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ê°ì²´ 
- `[[Construct]]`: Constructor --> ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ (Opp: non-constructor)
- **ì¦‰ í•¨ìˆ˜ ê°ì²´ëŠ” ë°˜ë“œì‹œ callableì´ì§€ë§Œ, ëª¨ë“  í•¨ìˆ˜ ê°ì²´ê°€ constructorì€ ì•„ë‹ˆë‹¤**
- Constructor : í•¨ìˆ˜ ì„ ì–¸ë¬¸, í•¨ìˆ˜ í‘œí˜„ì‹, í´ë˜ìŠ¤ 
- Non-constructor: ë©”ì„œë“œ(ES6 ì¶•ì•½ í‘œí˜„), í™”ì‚´í‘œ í•¨ìˆ˜ 
```javascript 
// CONSTRUCTOR 
function add(x, y) { 
    return x + y;
}

const sub = function(x, y) {
    return x - y;
}

obj {
    funcX: function() {}
}

// NON-CONSTRUCTOR
const multiply = (x, y) => x * y;

const obj = {
    x() {}
}
```

### ğŸ’¡`new.target`:
- ES6 ë¶€í„°ëŠ” í˜¸ì¶œ ë•Œ new ì—°ì‚°ì ì—¬ë¶€ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” new.targetì„ ì§€ì›í•œë‹¤
- new ì—°ì‚°ìì™€ í•¨ê»˜ ìƒì„±ì í•¨ìˆ˜ë¡œì„œ í˜¸ì¶œë˜ë©´ í•¨ìˆ˜ ë‚´ë¶€ì˜ new.targetì€ í•¨ìˆ˜ ìì‹ ì„ ê°€ë¦¬í‚¤ê³ , new ì—°ì‚°ì ì—†ì´ í˜¸ì¶œë˜ë©´ í•¨ìˆ˜ ë‚´ë¶€ì˜ new.targetì€ undefinedê°€ ëœë‹¤. ê³ ë¡œ ì•„ë˜ ì˜ˆì œì™€ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ 

```javascript 
function Circle(radius) {
    if (!new.target) {
        return new Circle(radius);
    }
    this.radius = radius;
    this.getDiameter = function() {
        return 2 * this.radius;
    };
}
```