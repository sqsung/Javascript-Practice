# 4장: 변수

### 4-1. 변수란 무엇인가? 왜 필요한가? 
---

#### 메모리 (Memory)
- 메모리는 데이터를 저장할 수 있는 메모리 셀(Memory Cell)의 집합체다
- 메모리 셀의 크기는 1바이트(8비트), 즉 컴퓨터는 1 바이트 단위의 데이터를 저장/읽는다 
- 각 메모리 셀은 고유의 <b>메모리 주소</b>를 갖는다 

#### 변수 
- 변수는 하나의 값을 저장하기 위해 확보한 메모리 공간 자체 또는 그 메모리 공간을 식별하기 위해 붙인 이름이다 
- 즉, 값의 위치(데이터가 저장되어 있는 메모리 셀의 고유 메모리 주소)를 가리키는 상징적인 이름 

```javascript
let result = 10 + 20;

/*

- result라는 변수명은 (10 + 20 =) 30이라는 값이 저장되어 있는 메모리 셀의 주소를 가리킨다 
- result 라는 변수명을 통해 CPU가 30이라는 값을 쉽게 참조해서 재사용할 수 있게 해준다 

*/ 

console.log(result); // 30
```

### 4-2. 식별자 
---
- 변수 이름을 식별자(Identifier)라고도 한다 
- 식별자는 어떤 값을 구별해서 식별할 수 있는 고유한 이름을 뜻한다 
- 식별자는 <b>값이 아니라, 메모리 주소를 기억하고 있다</b> (예: 0x0669F913) (메모리 주소에 붙인 이름이다)
- 변수명에만 국한되어 사용하는 단어가 아니다, 변수, 함수, 클래스 등의 이름은 모두 식별자이다 

### 4-3. 변수 선언 
---
- 변수를 사용하기 위해서는 반드시 <b>변수 선언</b>이 되어야 하며, 변수 선언은 `var`, `let`, `const` 키워드를 사용해 할 수 있다 
- 자바스크립트 엔진은 변수 선언을 2단계에 거쳐 수행한다 
  1. <b>선언 단계</b>: 변수 이름을 등록해서 엔진에 변수의 존재를 알림 
  2. <b>초기화 단계</b>: 값을 저장하기 위한 메모리 공간 확보, 암묵적으로 undefined 값으로 초기화 

```javascript
var score; 

/*

- var 키워드를 사용한 변수 선언, 값은 할당하지 않은 상태
- 따라서 score 변수명이 가리키는 메모리 셀은 비어 있다고 생각할 수 있으나 확보된 메모리 공간에 자바스크립트 엔진에 의해 'undefined' 값이 자동 할당되어 초기화 된다
- 이건 자바스크립트의 독특한 특징이다 

*/

console.log(score); // undefined
```
- var 키워드를 사용한 변수 선언은 선언/초기화 단계가 동시 진행된다, 즉 어떠한 값을 할당하지 않아도 undefined라는 값이라도 갖게 된다
- 만약 undefined로 초기화 되지 않는다면 메모리 공간에 이전 애플리케이션에서 사용하던 값이 남아 있어 참조될 수 있다 (쓰레기 값: Garbage Value)
- var 키워드는 자동 초기화하기 때문에 이러한 위험에서 안전하다 

### 4-4. 변수 선언의 실행 시점과 변수 호이스팅
---
```javascript   
console.log(score); // undefined

var score; // 변수 선언 
```
- 변수 선언문보다 변수를 참조하는 코드가 더 앞에 있으므로 참조 에러(Reference Error)가 발생할 것 같지만 undefined가 출력된다 
- 자바스크립트에서 변수 선언은 소스코드가 한 줄씩 실행되는 런타임(Runtime)이 아니라, 그 이전 단계에서 먼저 실행된다 
- 자바스크립트 엔진은 코드가 실행되기 전 소스코드의 평가 과정을 거치면서 소스코드를 실행하기 위한 준비를 하는데, 이때 변수 선언을 포함한 모든 선운문(변수/함수 선언문 등)을 우선 실행한다 
- 이처럼 변수 선언문이 코드 선두로 끌어 올려진 것처럼 동작하는 자바스크립트의 특징을 <b>변수 호이스팅(Variable Hoisting)</b>이라 한다

### 4-5. 값의 할당 
---
```javascript
// name 변수 선언, 이후 변수에 'James' 할당 
var name; 
name = 'James';

// 선언과 할당을 하나의 문(statement)로 단축 표현
var name = 'James'; 
```
- 변수 선언과 값의 할당을 하나의 문으로 단축 표현해도 선언과 할당의 실행 시점은 다르다 
- 마찬가지로 런타임 전 `var name` 부분이 먼저 실행되어 undefined 값으로 초기화 되고, 이후 런타임 때 `James`라는 값이 할당된다 

```javascript
console.log(name); // undefined

var name = 'James';

console.log(name); // James
```

### 4-6. 값의 재할당 
---
```javascript
var name = 'James'; // 변수 선언, 'James' 값 할당 

name = 'Ryan'; // 값 재할당 
```

- 위 예제에서 `name` 변수가 가리키는 메모리 셀 주소는 세 번 변경되었다 
    1. 런타임 전에 undefined 
    2. 런타임 중 James
    3. 런타임 중 Ryan 
- 값이 재할당될 때마다 기존의 메모리 공간이 비워지고 새로운 값이 추가되는 것이 아니라, `name`이라는 변수가 아예 새로운 메모리 공간을 가리키게 된다 
- undefined와 James는 어떤 식별자와도 연결되어 있지 않은 상태가 되고, 이런 불필요한 값은 가비지 콜레터에 의해 추후 메모리에서 자동 해제된다 (언제 헤제될지는 예측 불가)
    - 매니지드 언어(Managed Lang.): 가베지 콜렉터가 자동 메모리 해제 (JavaScript)
    - 언매니지드 언어(Unmanaged Lang.): 명시적으로 메모리 할당/해제 필수 (C언어)