# 11장: 원시 값과 객체의 비교

- 원시 값은 어떠한 경우에도 불변`Immutable`인 반면 객체 값은 변경 가능한`Mutable`값이다 
- 원시 값을 변수에 할당하면 해당 변수가 가리키는 메모리 공간에는 실제 값이 저장되지만, 객체를 변수에 할당하면 메모리 공간에 참조 값, 즉 실제 객체가 위치한 메모리 공간의 메모리 주소가 저장된다 
- ECMAScript에 규정되어 있는 용어는 아니지만
    1. **원시 값** : 값이 복사되어 전달 (값에 의한 전달 `Pass by Value`)
    2. **객체 값** : 원본의 참조 값이 복사되어 전달 (참조에 의한 전달 `Pass by Reference`)

<br> 

## 11-1. 원시 값 

### 소개: 
- **절대 불변**
- 오직 재할당만 가능하다. 재할당하는 경우에는 변수가 가리키는 메모리 셀의 주소가 변경되는 것이지 (새로운 메모리 공간에 새로운 값 생성), 값 자체가 변경되는 것이 절대 아니다 
- `const` 키워드를 사용해 '상수'를 선언해도 사실 재할당이 불가하게 설계되어 있는 것 뿐이지, 실제로 상수라는 개념의 값을 생성하는 것은 아니다 (만약 재할당 가능하다면 아래 그림처럼 동일하게 동작할 것)
- 
![숫자 재할당](https://user-images.githubusercontent.com/112310899/210716050-14fac643-b97c-4e36-9138-0f2f82ccbb48.png)

### 문자열의 불변성: 
- 자바스크립트의 장점 중 하나는 원시 값 문자열을 제공한다는 것이다 
- 숫자 할당 예시와 같이, 재할당의 경우 메모리 흐름은 같다 

![문자열 재할당](https://user-images.githubusercontent.com/112310899/210716140-6544fb58-ab8d-4b36-bb37-c429e416ead3.png)

- 동시에 자바스크립트 문자열은 '유사 배열 객체'이며 '이터러블'이므로, 배열과 유사하게 각 문자에 접근 가능하다 
- 하지만 어디까지나 유사 배열 객체이지, 원시 값이라는 근간은 사라지지 않기 때문에 인덱스에 해당하는 값을 참조하는 것은 가능하나, 값 자체를 변경할 수는 없다

```javascript
// 유사 배열 객체이므로 인덱스 별로 값을 참조할 수 있다 
let str = "hello world";
console.log(str[0]); // --> "h" 

// 원시 값이기 때문에 재할당은 가능하나, 참조되는 메모리의 주소만 변경되는 것이다 
let s1 = 'Hello'; // (eg) 메모리 주소: 0x00001332
s1 = 'World';  // (eg) 메모리 주소: 0x00001412

// 또한 참조는 가능하나 값 자체를 변경할 수는 없다 
let word = 'Samsung';
console.log(word[0]); // --> "S"
word[0] = 'Z';
console.log(word[0]); // --> "Z"
```

### 값에 의한 전달 (Pass by Value):
- 값이 새로운 변수에 할당될 때 값 자체가 복사된다. 즉, 새로운 메모리 공간에 같은 값을 복사하고, 새로 할당받은 변수는 새로운 메모리 공간을 가리키게 된다
- 두 변수는 별개의 값을 가리키고 있다고 보는 것이 맞으며, 어느 한 쪽에 새로운 값이 할당되어도 서로 영향을 미치지는 않는다 
- 표준이 정해져 있기 않기 때문에 브라우저 별로 내부 동작 방식은 다를 수 있으나, 대략 아래 내용처럼 동작한다고 이해할 수 있다

```javascript 
let score = 80; 
let copyOfScore = score; 

console.log(score, copyOfScore); // --> 80 80 

copyOfScore += 20; 
console.log(score, copyOfScore); // --> 80 100
```

![값에 의한 전달](https://user-images.githubusercontent.com/112310899/210716165-88ce48f0-2a37-4c20-87c5-2f673866fc00.png)

<br>

## 11-2. 객체 

### 소개: 
- Mutable, 변경 가능한 값이므로 재할당 없이 프로퍼티 값을 동적으로 생성/갱신할 수 있다 
- 객체의 프로퍼티 수를 예측할 수 없다는 점 등의 이유로 인해 객체를 계속 재할당하며 사용하는 건 성능에 좋지 않고 메모리 효율리 저하된다. 객체 값은 변경 가능하게 설정한 것은 메모리 효율을 고려해 어느정도 구조적인 단점을 감안한 설계라고 볼 수 있다 
    - 부작용: 여러 식별자가 하나의 객체를 공유할 수 있다는 점이다 

### 참조에 의한 전달: 
- 참조에 의한 전달은 사실 자바스크립트에서 존재하지 않는 용어이다 (값에 의한 전달도 마찬가지)
- 사실 모든 할당 과정을 '공유에 의한 전달'이라고 표현하는 것이 더 적절하다 
- 변수에 객체가 할당되면 변수(as 메모리 공간)에는 객체가 위치한 메모리 주소가 저장된다. 새로운 변수에 같은 값을 재할당하는 경우 이 메모리 주소가 새로운 메모리 공간에 할당되는 것이며(원시 값 떄와 마찬가지), 이로 인해 다른 식별자끼리 서로 같은 객체를 참조하게 되는 것이다 
```javascript
var original = {
    name: 'Kim', 
    age: 6
}

var copied = original; 
```

![객체 메모리](https://user-images.githubusercontent.com/112310899/210718458-34e51457-d651-4004-b038-67ca682b7fbe.png)


- 따라서 결구 같은 객체를 가리키고 있는 것이기 때문에 어느 한 쪽에서 객체 값을 변경하면 모든 식별자가 변경된 객체를 가리키게 된다 

```javascript
let original = {
    name: 'Sohn',
    age: 9,
}

let copied = original; // 객체 데이터가 위치한 메모리 주소 자체가 복사되게 됨 

copied.location = 'South Korea'; 
console.log(original.location); // --> "South Korea" 
```
